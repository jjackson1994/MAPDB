version: "3.6"

services:

  dask-scheduler:
    image: jj:dask_scheduler_jake
    container_name: dask-scheduler
    ports:
      - 8787:8787
      - 8786:8786
    volumes:
      - $PWD:/opt/workspace
    environment:
      - DASK_SCHEDULER_HOST=dask-scheduler

  dask-worker:
    image: jj:dask_worker_jake
    depends_on:
      - dask-scheduler
    volumes:
      - $PWD:/opt/workspace
    environment:
      - DASK_WORKER_CORES=1
      - DASK_WORKER_MEMORY=2300MB
      - DASK_WORKER_THREADS=1
      - DASK_SCHEDULER_HOST=dask-scheduler

  jupyterlab:
    image: jj:dask_jupyter_jake
    container_name: jupyterlab
    depends_on:
      - dask-scheduler
    ports:
      - 8888:8888
    volumes:
      - $PWD:/opt/workspace
